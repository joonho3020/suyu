# Suyu

A diagramming tool written in Rust.

## Installation

### Build from source

```bash
git clone <repository-url>
cd suyu
cargo build --release
```

The binary will be at `target/release/suyu`.

## Configuration

Suyu looks for a configuration file in `~/.config/suyu.toml`

### Example `suyu.toml`

```toml
snap_to_grid = false
grid_size = 64.0
move_step = 1.0
move_step_fast = 10.0
apply_style_to_selection = true
active_color_theme = 0

# Optional: path to directory containing custom fonts (.ttf or .otf)
# font_directory = "/path/to/fonts"

[[color_themes]]
name = "tokyonight"

[color_themes.colors]
magenta = "#ad8ee6"
darkblue = "#1a1b26"
lightblue = "#7dcfff"
bg = "#1a1b26"
yellow = "#e0af68"
cyan = "#7aa2f7"
red = "#f7768e"
fg = "#c0caf5"
orange = "#ff9e64"
green = "#9ece6a"
purple = "#bb9af7"
```

### Configuration Options

| Option | Type | Description |
|--------|------|-------------|
| `snap_to_grid` | bool | Enable snapping elements to grid |
| `grid_size` | float | Grid cell size in pixels |
| `move_step` | float | Pixels to move when using arrow keys |
| `move_step_fast` | float | Pixels to move with Shift+arrow keys |
| `apply_style_to_selection` | bool | Apply style changes to all selected elements |
| `active_color_theme` | int | Index of the active color theme |
| `font_directory` | string | Path to directory with custom fonts |
| `color_themes` | array | Array of color theme definitions |

## Usage

### Command Palette

The command palette is the primary way to access all features in Suyu.
It provides fuzzy search over all available commands.
The command palette can be opened by pressing `Space`

### Keyboard Shortcuts

#### General
| Shortcut | Action |
|----------|--------|
| `Space` | Open command palette |
| `⌘S` | Save diagram (JSON) |
| `⌘⇧S` | Export as SVG |
| `⌘O` | Open/load diagram |
| `⌘Z` | Undo |
| `⌘⇧Z` / `⌘Y` | Redo |
| `Escape` | Cancel action / Select tool |
| `F1` | Show help |

#### Selection & Editing
| Shortcut | Action |
|----------|--------|
| `⌘C` | Copy selected |
| `⌘X` | Cut selected |
| `⌘V` | Paste |
| `⌘D` | Duplicate selected |
| `Delete` / `Backspace` | Delete selected |
| `Arrow keys` | Move selection or pan |
| `Shift + Arrow keys` | Move selection faster |
| `Double-click` | Edit text inline |

#### Tools
| Shortcut | Tool |
|----------|------|
| `V` or `Esc` | Select |
| `R` | Rectangle |
| `O` | Ellipse |
| `⇧T` | Triangle |
| `⇧P` | Parallelogram |
| `⇧Z` | Trapezoid |
| `L` | Line |
| `A` | Arrow |
| `⇧A` | Bidirectional Arrow |
| `⇧L` | Polyline |
| `P` | Pen (freehand) |
| `T` | Text |
| `Space (hold)` | Pan |


### Custom Fonts

To use custom fonts:

1. Add `font_directory` to your config file pointing to a folder with `.ttf` or `.otf` files
2. Restart Suyu or use `Settings: Reload` from the command palette
3. Select the custom font via `Format: Set Custom Font...` command

### File Formats

- **Diagrams**: Saved as JSON files (`.json`)
- **Export**: SVG format for use in other applications
- **Settings**: TOML format (`suyu.toml`)

## Tips

- Hold `Space` and drag to pan the canvas
- Hold `Shift` while drawing to constrain to squares or axis-aligned shapes
- Use scroll wheel to zoom in/out
- Right-click while using the polyline tool to add points
- Group objects to move them together
- Use "Connect" commands to create dynamic connections between shapes
- Enable "Apply to selection" in the sidebar to change styles of multiple objects at once

## Misc

Most of the code was generated by Opus 4.5
